<!DOCTYPE html>
<html>

<head>
  <!-- adding 8th Wall's custom AFrame Library, inlcudes AFrame -->
  <script src="//cdn.8thwall.com/web/aframe/8frame-0.9.2.min.js"></script>
  <!-- adding behind the scenes of our own 8th Wall Project,,,, that we paid for!!!!! -->
  <script src="//apps.8thwall.com/xrweb?appKey=jfq5MCzTU8gyxP9eEV7Y5GIkgx41zOJbpJyg5b3ngeXjPfwGImNgpLDTN6BCXuWaB8oebe"></script>
  <script>
    // Register custom A-Frame components
    import { tapPlaceComponent } from './tap-place'
    // import { databaseHandler } from './db-handler'
    AFRAME.registerComponent('tap-place', tapPlaceComponent)
  </script>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Welcome to Firebase Hosting</title>

  <!-- set our firebase configuration -->
  <script defer src="./firebase_config.js"></script>
  <!-- update the version number as needed -->
  <script defer src="/__/firebase/9.6.10/firebase-app-compat.js"></script>
  <!-- include only the Firebase features as you need -->
  <script defer src="/__/firebase/9.6.10/firebase-auth-compat.js"></script>
  <script defer src="/__/firebase/9.6.10/firebase-database-compat.js"></script>
  <script defer src="/__/firebase/9.6.10/firebase-firestore-compat.js"></script>
  <script defer src="/__/firebase/9.6.10/firebase-functions-compat.js"></script>
  <script defer src="/__/firebase/9.6.10/firebase-messaging-compat.js"></script>
  <script defer src="/__/firebase/9.6.10/firebase-storage-compat.js"></script>
  <script defer src="/__/firebase/9.6.10/firebase-analytics-compat.js"></script>
  <script defer src="/__/firebase/9.6.10/firebase-remote-config-compat.js"></script>
  <script defer src="/__/firebase/9.6.10/firebase-performance-compat.js"></script>
  <!-- 
      initialize the SDK after all desired features are loaded, set useEmulator to false
      to avoid connecting the SDK to running emulators.
    -->
  <script defer src="/__/firebase/init.js?useEmulator=true"></script>

</head>

<body>
  <!-- Add the tap-place component to the scene so it has an effect -->
  <a-scene tap-place landing-page xrextras-loading xrextras-runtime-error renderer="colorManagement:true" xrweb="
  allowedDevices: any;
  defaultEnvironmentFogIntensity: 0.5; 
  defaultEnvironmentFloorTexture: #groundTex; 
  defaultEnvironmentFloorColor: #FFF;
  defaultEnvironmentSkyBottomColor: #B4C4CC; 
  defaultEnvironmentSkyTopColor: #5ac8fa;
  defaultEnvironmentSkyGradientStrength: 0.5;">

    <!-- We can define assets here to be loaded when A-Frame initializes -->
    <a-assets>
      <img id="groundTex" src="assets/sand.jpg">
      <a-asset-item id="cactusModel" src="assets/cactus.glb"></a-asset-item>
    </a-assets>

    <!-- The raycaster will emit mouse events on scene objects specified with the cantap class -->
    <a-camera id="camera" position="0 8 0" raycaster="objects: .cantap" cursor="
    fuse: false;
    rayOrigin: mouse;">
    </a-camera>

    <a-entity light="
    type: directional;
    intensity: 0.8;
    castShadow: true;
    shadowMapHeight:2048;
    shadowMapWidth:2048;
    shadowCameraTop: 40;
    shadowCameraBottom: -40;
    shadowCameraRight: 40;
    shadowCameraLeft: -40;
    target: #camera" xrextras-attach="target: camera; offset: 8 15 4" position="1 4.3 2.5" shadow>
    </a-entity>

    <a-light type="ambient" intensity="0.5"></a-light>

    <!-- Adding the cantap class allows the ground to be clicked -->
    <a-box id="ground" class="cantap" scale="1000 2 1000" position="0 -0.99 0"
      material="shader: shadow; transparent: true; opacity: 0.4" shadow>
    </a-box>
  </a-scene>

  <div id="message">
    <h2>Welcome</h2>
    <h1>Firebase Hosting Setup Complete</h1>
    <p>You're seeing this because you've successfully setup Firebase Hosting. Now it's time to go build something
      extraordinary!</p>
    <a target="_blank" href="https://firebase.google.com/docs/hosting/">Open Hosting Documentation</a>
  </div>
  <p id="load">Firebase SDK Loading&hellip;</p>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const loadEl = document.querySelector('#load');
      // // ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥
      // // The Firebase SDK is initialized and available here!
      //
      // firebase.auth().onAuthStateChanged(user => { });
      // firebase.database().ref('/path/to/ref').on('value', snapshot => { });
      // firebase.firestore().doc('/foo/bar').get().then(() => { });
      // firebase.functions().httpsCallable('yourFunction')().then(() => { });
      // firebase.messaging().requestPermission().then(() => { });
      // firebase.storage().ref('/path/to/ref').getDownloadURL().then(() => { });
      // firebase.analytics(); // call to activate
      // firebase.analytics().logEvent('tutorial_completed');
      // firebase.performance(); // call to activate
      //
      // // ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥

      try {
        let app = firebase.app();
        let features = [
          'auth',
          'database',
          'firestore',
          'functions',
          'messaging',
          'storage',
          'analytics',
          'remoteConfig',
          'performance',
        ].filter(feature => typeof app[feature] === 'function');
        loadEl.textContent = `Firebase SDK loaded with ${features.join(', ')}`;
      } catch (e) {
        console.error(e);
        loadEl.textContent = 'Error loading the Firebase SDK, check the console.';
      }
    });
  </script>
</body>

</html>
